# Migration Guide: v0.7.0 to v0.8.0

This guide covers the breaking changes and API stabilization in v0.8.0.

## Breaking Changes

### 1. `Box<dyn View>` now implements `View`

Previously, boxed views couldn't be used directly as children. Now they can:

```rust
// Before (v0.7.0): Required workarounds
fn get_widget() -> Box<dyn View> { Box::new(Text::new("Hello")) }
// Could not pass directly to .child()

// After (v0.8.0): Works directly
vstack()
    .child(get_widget()) // Box<dyn View> implements View
```

### 2. Widget Constructor Patterns

Revue widgets follow two patterns:

**Convenience Constructors** - Create pre-configured widgets:
```rust
Text::muted("Gray text")      // Creates text with muted color
Button::primary("Submit")     // Creates primary-styled button
Border::rounded()             // Creates border with rounded corners
```

**Builder Methods** - Configure after creation:
```rust
Text::new("Hello").bold()
Button::new("Click").disabled(true)
Checkbox::new("Option").checked(true)
Switch::new().on(true).label("Toggle")
Gauge::new().value(0.65).label("CPU")
```

### 3. Deprecated APIs

The following APIs are deprecated and will be removed in v1.0:

| Deprecated | Replacement | Since |
|------------|-------------|-------|
| `Runtime` | `App::run_with_handler()` | v0.1.0 |

## API Stability

Starting with v0.8.0, the public API is considered stable. Breaking changes will follow semantic versioning.

### Stable APIs

- `View` trait and all widget types
- `Signal`, `Computed`, `Effect` reactive primitives
- `App` builder and runner
- All event types (`Key`, `KeyEvent`, `MouseEvent`, `Event`)
- CSS parsing and theming
- Testing utilities (`Pilot`, `TestApp`)

### Experimental APIs

The following APIs may change in future versions:

- DevTools configuration (feature-gated)
- Plugin system internals
- Some animation choreography APIs

## Error Handling

v0.8.0 standardizes error handling:

```rust
use revue::{Error, Result};

fn my_function() -> Result<()> {
    // Use ? operator for fallible operations
    Ok(())
}
```

Error types:
- `Error::Css` - CSS parsing errors
- `Error::Io` - File I/O errors
- `Error::Other` - Generic errors

## Testing

v0.8.0 requires proper test cleanup:

```rust
#[test]
fn test_widget() {
    let mut app = TestApp::new(MyWidget::new());
    let mut pilot = Pilot::new(&mut app);

    pilot
        .press(Key::Enter)
        .assert_contains("Expected");
}
```
